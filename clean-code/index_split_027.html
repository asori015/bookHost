<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <title>index</title>
    <meta name="generator" content="pdftohtml 0.36"/>
    <meta name="date" content="2009-10-16T23:21:09+00:00"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link rel="stylesheet" type="text/css" href="stylesheet.css"/>
<link rel="stylesheet" type="text/css" href="page_styles.css"/>
</head>
  <body class="calibre">
<h2 class="calibre5" id="calibre_pb_52">Chapter 4: Comments</h2>
<p class="calibre1">we had the talent to subtly wield those languages to express our intent, we would not need comments very much—perhaps not at all.</p>
<p class="calibre1">The proper use of comments is to compensate for our failure to express ourself in code. Note that I used the word  <i class="calibre4">failure</i>. I meant it. Comments are always failures. We must have them because we cannot always figure out how to express ourselves without them, but their use is not a cause for celebration.</p>
<p class="calibre1">So when you find yourself in a position where you need to write a comment, think it through and see whether there isn’t some way to turn the tables and express yourself in code. Every time you express yourself in code, you should pat yourself on the back. Every time you write a comment, you should grimace and feel the failure of your ability of expression.</p>
<p class="calibre1">Why am I so down on comments? Because they lie. Not always, and not intentionally, but too often. The older a comment is, and the farther away it is from the code it describes, the more likely it is to be just plain wrong. The reason is simple. Programmers can’t realistically maintain them.</p>
<p class="calibre1">Code changes and evolves. Chunks of it move from here to there. Those chunks bifur-cate and reproduce and come together again to form chimeras. Unfortunately the comments don’t always follow them— <i class="calibre4">can’t </i> always follow them. And all too often the comments get separated from the code they describe and become orphaned blurbs of ever-decreasing accuracy. For example, look what has happened to this comment and the line it was intended to describe: MockRequest request;</p>
<p class="calibre1">private final String HTTP_DATE_REGEXP =</p>
<p class="calibre1">"[SMTWF][a-z]{2}\\,\\s[0-9]{2}\\s[JFMASOND][a-z]{2}\\s"+</p>
<p class="calibre1">"[0-9]{4}\\s[0-9]{2}\\:[0-9]{2}\\:[0-9]{2}\\sGMT";</p>
<p class="calibre1">private Response response;</p>
<p class="calibre1">private FitNesseContext context;</p>
<p class="calibre1">private FileResponder responder;</p>
<p class="calibre1">private Locale saveLocale;</p>
<p class="calibre1"><b class="calibre3">// Example: "Tue, 02 Apr 2003 22:18:49 GMT" </b></p>
<p class="calibre1">Other instance variables that were probably added later were interposed between the HTTP_DATE_REGEXP constant and it’s explanatory comment.</p>
<p class="calibre1">It is possible to make the point that programmers should be disciplined enough to keep the comments in a high state of repair, relevance, and accuracy. I agree, they should.</p>
<p class="calibre1">But I would rather that energy go toward making the code so clear and expressive that it does not need the comments in the first place.</p>
<p class="calibre1">Inaccurate comments are far worse than no comments at all. They delude and mislead.</p>
<p class="calibre1">They set expectations that will never be fulfilled. They lay down old rules that need not, or should not, be followed any longer.</p>
<p class="calibre1">Truth can only be found in one place: the code. Only the code can truly tell you what it does. It is the only source of truly accurate information. Therefore, though comments are sometimes necessary, we will expend significant energy to minimize them.</p>
<p class="calibre1"><a id="p86"></a><b class="calibre3">Good Comments</b></p>
<p class="calibre1">55</p>
<p class="calibre1"><a href="index_split_000.html#p10"><b class="calibre3">Comments Do Not Make Up for Bad Code</b></a></p>
<p class="calibre1">One of the more common motivations for writing comments is bad code. We write a module and we know it is confusing and disorganized. We know it’s a mess. So we say to ourselves, “Ooh, I’d better comment that!” No! You’d better clean it!</p>
<p class="calibre1">Clear and expressive code with few comments is far superior to cluttered and complex code with lots of comments. Rather than spend your time writing the comments that explain the mess you’ve made, spend it cleaning that mess.</p>
<p class="calibre1"><a href="index_split_000.html#p10"><b class="calibre3">Explain Yourself in Code</b></a></p>
<p class="calibre1">There are certainly times when code makes a poor vehicle for explanation. Unfortunately, many programmers have taken this to mean that code is seldom, if ever, a good means for explanation. This is patently false. Which would you rather see? This: // Check to see if the employee is eligible for full benefits</p>
<p class="calibre1">if ((employee.flags &amp; HOURLY_FLAG) &amp;&amp;</p>
<p class="calibre1">(employee.age &gt; 65))</p>
<p class="calibre1">Or this?</p>
<p class="calibre1">if (employee.isEligibleForFullBenefits())</p>
<p class="calibre1">It takes only a few seconds of thought to explain most of your intent in code. In many cases it’s simply a matter of creating a function that says the same thing as the comment you want to write.</p>
<p class="calibre1"><a href="index_split_000.html#p10"><b class="calibre3">Good Comments</b></a></p>
<p class="calibre1">Some comments are necessary or beneficial. We’ll look at a few that I consider worthy of the bits they consume. Keep in mind, however, that the only truly good comment is the comment you found a way not to write.</p>
<p class="calibre1"><a href="index_split_000.html#p10"><b class="calibre3">Legal Comments</b></a></p>
<p class="calibre1">Sometimes our corporate coding standards force us to write certain comments for legal reasons. For example, copyright and authorship statements are necessary and reasonable things to put into a comment at the start of each source file.</p>
<p class="calibre1">Here, for example, is the standard comment header that we put at the beginning of every source file in FitNesse. I am happy to say that our IDE hides this comment from acting as clutter by automatically collapsing it.</p>
<p class="calibre1">// Copyright (C) 2003,2004,2005 by Object Mentor, Inc. All rights reserved.</p>
<p class="calibre1">// Released under the terms of the GNU General Public License version 2 or later.</p>
<p class="calibre1"><a id="p87"></a>56</p>
<div class="calibre6" id="calibre_pb_53"></div>
</body>
</html>
