<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <title>index</title>
    <meta name="generator" content="pdftohtml 0.36"/>
    <meta name="date" content="2009-10-16T23:21:09+00:00"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link rel="stylesheet" type="text/css" href="stylesheet.css"/>
<link rel="stylesheet" type="text/css" href="page_styles.css"/>
</head>
  <body class="calibre">
<h2 class="calibre5" id="calibre_pb_88">Chapter 5: Formatting</h2>
<p class="calibre1"><a href="index_split_000.html#p11"><b class="calibre3">Dummy Scopes</b></a></p>
<p class="calibre1">Sometimes the body of a while or for statement is a dummy, as shown below. I don’t like these kinds of structures and try to avoid them. When I can’t avoid them, I make sure that the dummy body is properly indented and surrounded by braces. I can’t tell you how many times I’ve been fooled by a semicolon silently sitting at the end of a while loop on the same line. Unless you make that semicolon  <i class="calibre4">visible</i> by indenting it on it’s own line, it’s just too hard to see.</p>
<p class="calibre1">while (dis.read(buf, 0, readBufferSize) != -1)</p>
<p class="calibre1">;</p>
<p class="calibre1"><a href="index_split_000.html#p11"><b class="calibre3">Team Rules</b></a></p>
<p class="calibre1">The title of this section is a play on</p>
<p class="calibre1">words. Every programmer has his own</p>
<p class="calibre1">favorite formatting rules, but if he works</p>
<p class="calibre1">in a team, then the team rules.</p>
<p class="calibre1">A team of developers should agree</p>
<p class="calibre1">upon a single formatting style, and then</p>
<p class="calibre1">every member of that team should use</p>
<p class="calibre1">that style. We want the software to have a</p>
<p class="calibre1">consistent style. We don’t want it to appear to have been written by a bunch of disagreeing individuals.</p>
<p class="calibre1">When I started the FitNesse project back in 2002, I sat down with the team to work out a coding style. This took about 10 minutes. We decided where we’d put our braces, what our indent size would be, how we would name classes, variables, and methods, and so forth. Then we encoded those rules into the code formatter of our IDE and have stuck with them ever since. These were not the rules that I prefer; they were rules decided by the team. As a member of that team I followed them when writing code in the FitNesse project.</p>
<p class="calibre1">Remember, a good software system is composed of a set of documents that read nicely. They need to have a consistent and smooth style. The reader needs to be able to trust that the formatting gestures he or she has seen in one source file will mean the same thing in others. The last thing we want to do is add more complexity to the source code by writing it in a jumble of different individual styles.</p>
<p class="calibre1"><a href="index_split_000.html#p11"><b class="calibre3">Uncle Bob’s Formatting Rules</b></a></p>
<p class="calibre1">The rules I use personally are very simple and are illustrated by the code in Listing 5-6.</p>
<p class="calibre1">Consider this an example of how code makes the best coding standard document.</p>
<p class="calibre1"><a id="p122"></a><b class="calibre3">Uncle Bob’s Formatting Rules</b></p>
<p class="calibre1">91</p>
<p class="calibre1"><b class="calibre3">Listing 5-6 </b></p>
<p class="calibre1"><b class="calibre3">CodeAnalyzer.java</b></p>
<p class="calibre1">public class CodeAnalyzer implements JavaFileAnalysis {</p>
<p class="calibre1">private int lineCount;</p>
<p class="calibre1">private int maxLineWidth;</p>
<p class="calibre1">private int widestLineNumber;</p>
<p class="calibre1">private LineWidthHistogram lineWidthHistogram;</p>
<p class="calibre1">private int totalChars;</p>
<p class="calibre1">public CodeAnalyzer() {</p>
<p class="calibre1">lineWidthHistogram = new LineWidthHistogram();</p>
<p class="calibre1">}</p>
<p class="calibre1">public static List&lt;File&gt; findJavaFiles(File parentDirectory) {</p>
<p class="calibre1">List&lt;File&gt; files = new ArrayList&lt;File&gt;();</p>
<p class="calibre1">findJavaFiles(parentDirectory, files);</p>
<p class="calibre1">return files;</p>
<p class="calibre1">}</p>
<p class="calibre1">private static void findJavaFiles(File parentDirectory, List&lt;File&gt; files) {</p>
<p class="calibre1">for (File file : parentDirectory.listFiles()) {</p>
<p class="calibre1">if (file.getName().endsWith(".java"))</p>
<p class="calibre1">files.add(file);</p>
<p class="calibre1">else if (file.isDirectory())</p>
<p class="calibre1">findJavaFiles(file, files);</p>
<p class="calibre1">}</p>
<p class="calibre1">}</p>
<p class="calibre1">public void analyzeFile(File javaFile) throws Exception {</p>
<p class="calibre1">BufferedReader br = new BufferedReader(new FileReader(javaFile)); String line;</p>
<p class="calibre1">while ((line = br.readLine()) != null)</p>
<p class="calibre1">measureLine(line);</p>
<p class="calibre1">}</p>
<p class="calibre1">private void measureLine(String line) {</p>
<p class="calibre1">lineCount++;</p>
<p class="calibre1">int lineSize = line.length();</p>
<p class="calibre1">totalChars += lineSize;</p>
<p class="calibre1">lineWidthHistogram.addLine(lineSize, lineCount);</p>
<p class="calibre1">recordWidestLine(lineSize);</p>
<p class="calibre1">}</p>
<p class="calibre1">private void recordWidestLine(int lineSize) {</p>
<p class="calibre1">if (lineSize &gt; maxLineWidth) {</p>
<p class="calibre1">maxLineWidth = lineSize;</p>
<p class="calibre1">widestLineNumber = lineCount;</p>
<p class="calibre1">}</p>
<p class="calibre1">}</p>
<p class="calibre1">public int getLineCount() {</p>
<p class="calibre1">return lineCount;</p>
<p class="calibre1">}</p>
<p class="calibre1">public int getMaxLineWidth() {</p>
<p class="calibre1">return maxLineWidth;</p>
<p class="calibre1">}</p>
<p class="calibre1"><a id="p123"></a>92</p>
<div class="calibre6" id="calibre_pb_89"></div>
</body>
</html>
