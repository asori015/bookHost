<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <title>index</title>
    <meta name="generator" content="pdftohtml 0.36"/>
    <meta name="date" content="2009-10-16T23:21:09+00:00"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link rel="stylesheet" type="text/css" href="stylesheet.css"/>
<link rel="stylesheet" type="text/css" href="page_styles.css"/>
</head>
  <body class="calibre">
<h2 class="calibre5" id="calibre_pb_56">Chapter 4: Comments</h2>
<p class="calibre1"><a href="index_split_000.html#p10"><b class="calibre3">Warning of Consequences</b></a></p>
<p class="calibre1">Sometimes it is useful to warn other pro-</p>
<p class="calibre1">grammers about certain consequences. For</p>
<p class="calibre1">example, here is a comment that explains</p>
<p class="calibre1">why a particular test case is turned off:</p>
<p class="calibre1"><b class="calibre3">// Don't run unless you </b></p>
<p class="calibre1"><b class="calibre3">// have some time to kill. </b></p>
<p class="calibre1">public void _testWithReallyBigFile()</p>
<p class="calibre1">{</p>
<p class="calibre1">writeLinesToFile(10000000);</p>
<p class="calibre1">response.setBody(testFile);</p>
<p class="calibre1">response.readyToSend(this);</p>
<p class="calibre1">String responseString = output.toString();</p>
<p class="calibre1">assertSubString("Content-Length: 1000000000", responseString); assertTrue(bytesSent &gt; 1000000000);</p>
<p class="calibre1">}</p>
<p class="calibre1">Nowadays, of course, we’d turn off the test case by using the @Ignore attribute with an appropriate explanatory string. @Ignore("Takes too long to run"). But back in the days before JUnit 4, putting an underscore in front of the method name was a common convention. The comment, while flippant, makes the point pretty well.</p>
<p class="calibre1">Here’s another, more poignant example:</p>
<p class="calibre1">public static SimpleDateFormat makeStandardHttpDateFormat()</p>
<p class="calibre1">{</p>
<p class="calibre1"><b class="calibre3">//SimpleDateFormat is not thread safe, </b></p>
<p class="calibre1"><b class="calibre3">//so we need to create each instance independently. </b></p>
<p class="calibre1">SimpleDateFormat df = new SimpleDateFormat("EEE, dd MMM  yyyy HH:mm:ss z"); df.setTimeZone(TimeZone.getTimeZone("GMT"));</p>
<p class="calibre1">return df;</p>
<p class="calibre1">}</p>
<p class="calibre1">You might complain that there are better ways to solve this problem. I might agree with you. But the comment, as given here, is perfectly reasonable. It will prevent some overly eager programmer from using a static initializer in the name of efficiency.</p>
<p class="calibre1"><a href="index_split_000.html#p10"><b class="calibre3">TODO Comments</b></a></p>
<p class="calibre1">It is sometimes reasonable to leave “To do” notes in the form of //TODO comments. In the following case, the TODO comment explains why the function has a degenerate implementation and what that function’s future should be.</p>
<p class="calibre1"><b class="calibre3">//TODO-MdM these are not needed</b></p>
<p class="calibre1"><b class="calibre3">// We expect this to go away when we do the checkout model</b></p>
<p class="calibre1">protected VersionInfo makeVersion() throws Exception</p>
<p class="calibre1">{</p>
<p class="calibre1">return null;</p>
<p class="calibre1">}</p>
<p class="calibre1"><a id="p90"></a><b class="calibre3">Bad Comments</b></p>
<p class="calibre1">59</p>
<p class="calibre1">TODOs are jobs that the programmer thinks should be done, but for some reason can’t do at the moment. It might be a reminder to delete a deprecated feature or a plea for someone else to look at a problem. It might be a request for someone else to think of a better name or a reminder to make a change that is dependent on a planned event. Whatever else a TODO might be, it is  <i class="calibre4">not </i> an excuse to leave bad code in the system.</p>
<p class="calibre1">Nowadays, most good IDEs provide special gestures and features to locate all the TODO comments, so it’s not likely that they will get lost. Still, you don’t want your code to be littered with TODOs. So scan through them regularly and eliminate the ones you can.</p>
<p class="calibre1"><a href="index_split_000.html#p10"><b class="calibre3">Amplification</b></a></p>
<p class="calibre1">A comment may be used to amplify the importance of something that may otherwise seem inconsequential.</p>
<p class="calibre1">String listItemContent = match.group(3).trim();</p>
<p class="calibre1"><b class="calibre3">// the trim is real important.  It removes the starting </b></p>
<p class="calibre1"><b class="calibre3">// spaces that could cause the item to be recognized</b></p>
<p class="calibre1"><b class="calibre3">// as another list. </b></p>
<p class="calibre1">new ListItemWidget(this, listItemContent, this.level + 1);</p>
<p class="calibre1">return buildList(text.substring(match.end()));</p>
<p class="calibre1"><a href="index_split_000.html#p10"><b class="calibre3">Javadocs in Public APIs</b></a></p>
<p class="calibre1">There is nothing quite so helpful and satisfying as a well-described public API. The javadocs for the standard Java library are a case in point. It would be difficult, at best, to write Java programs without them.</p>
<p class="calibre1">If you are writing a public API, then you should certainly write good javadocs for it.</p>
<p class="calibre1">But keep in mind the rest of the advice in this chapter. Javadocs can be just as misleading, nonlocal, and dishonest as any other kind of comment.</p>
<p class="calibre1"><a href="index_split_000.html#p10"><b class="calibre3">Bad Comments</b></a></p>
<p class="calibre1">Most comments fall into this category. Usually they are crutches or excuses for poor code or justifications for insufficient decisions, amounting to little more than the programmer talking to himself.</p>
<p class="calibre1"><a href="index_split_000.html#p10"><b class="calibre3">Mumbling</b></a></p>
<p class="calibre1">Plopping in a comment just because you feel you should or because the process requires it, is a hack. If you decide to write a comment, then spend the time necessary to make sure it is the best comment you can write.</p>
<p class="calibre1"><a id="p91"></a>60</p>
<div class="calibre6" id="calibre_pb_57"></div>
</body>
</html>
