<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <title>index</title>
    <meta name="generator" content="pdftohtml 0.36"/>
    <meta name="date" content="2009-10-16T23:21:09+00:00"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link rel="stylesheet" type="text/css" href="stylesheet.css"/>
<link rel="stylesheet" type="text/css" href="page_styles.css"/>
</head>
  <body class="calibre">
<h2 class="calibre5" id="calibre_pb_128">Chapter 9: Unit Tests</h2>
<p class="calibre1">•  <i class="calibre4">Given</i> the last day of a month with 30 days in it (like June): <b class="calibre3">1. </b></p>
<p class="calibre1"><i class="calibre4">When </i> you add one month such that the last day of that month has 31 days,  <i class="calibre4">then </i> the date should be the 30th, not the 31st.</p>
<p class="calibre1">Stated like this, you can see that there is a general rule hiding amidst the miscellaneous tests. When you increment the month, the date can be no greater than the last day of the month. This implies that incrementing the month on February 28th should yield March 28th.  <i class="calibre4">That</i> test is missing and would be a useful test to write.</p>
<p class="calibre1">So it’s not the multiple asserts in each section of Listing 9-8 that causes the problem.</p>
<p class="calibre1">Rather it is the fact that there is more than one concept being tested. So probably the best rule is that you should minimize the number of asserts per concept and test just one concept per test function.</p>
<p class="calibre1"><a href="index_split_000.html#p12"><b class="calibre3">F.I.R.S.T.8</b></a></p>
<p class="calibre1">Clean tests follow five other rules that form the above acronym: <b class="calibre3">Fast </b>Tests should be fast. They should run quickly. When tests run slow, you won’t want to run them frequently. If you don’t run them frequently, you won’t find problems early enough to fix them easily. You won’t feel as free to clean up the code. Eventually the code will begin to rot.</p>
<p class="calibre1"><b class="calibre3">Independent </b>Tests should not depend on each other. One test should not set up the conditions for the next test. You should be able to run each test independently and run the tests in any order you like. When tests depend on each other, then the first one to fail causes a cascade of downstream failures, making diagnosis difficult and hiding downstream defects.</p>
<p class="calibre1"><b class="calibre3">Repeatable </b>Tests should be repeatable in any environment. You should be able to run the tests in the production environment, in the QA environment, and on your laptop while riding home on the train without a network. If your tests aren’t repeatable in any environment, then you’ll always have an excuse for why they fail. You’ll also find yourself unable to run the tests when the environment isn’t available.</p>
<p class="calibre1"><b class="calibre3">Self-Validating </b>The tests should have a boolean output. Either they pass or fail. You should not have to read through a log file to tell whether the tests pass. You should not have to manually compare two different text files to see whether the tests pass. If the tests aren’t self-validating, then failure can become subjective and running the tests can require a long manual evaluation.</p>
<p class="calibre1">8.</p>
<p class="calibre1">Object Mentor Training Materials.</p>
<p class="calibre1"><a id="p164"></a><b class="calibre3">Bibliography</b></p>
<p class="calibre1">133</p>
<p class="calibre1"><b class="calibre3">Timely </b>The tests need to be written in a timely fashion. Unit tests should be written  <i class="calibre4">just</i> <i class="calibre4">before </i> the production code that makes them pass. If you write tests after the production code, then you may find the production code to be hard to test. You may decide that some production code is too hard to test. You may not design the production code to be testable.</p>
<p class="calibre1"><a href="index_split_000.html#p12"><b class="calibre3">Conclusion</b></a></p>
<p class="calibre1">We have barely scratched the surface of this topic. Indeed, I think an entire book could be written about  <i class="calibre4">clean tests</i>. Tests are as important to the health of a project as the production code is. Perhaps they are even more important, because tests preserve and enhance the flexibility, maintainability, and reusability of the production code. So keep your tests constantly clean. Work to make them expressive and succinct. Invent testing APIs that act as domain-specific language that helps you write the tests.</p>
<p class="calibre1">If you let the tests rot, then your code will rot too. Keep your tests clean.</p>
<p class="calibre1"><a href="index_split_000.html#p12"><b class="calibre3">Bibliography</b></a></p>
<p class="calibre1"><b class="calibre3">[RSpec]:  </b> <i class="calibre4">RSpec: Behavior Driven Development for Ruby Programmers</i>, Aslak Hellesøy, David Chelimsky, Pragmatic Bookshelf, 2008.</p>
<p class="calibre1"><b class="calibre3">[GOF]:  </b> <i class="calibre4">Design Patterns: Elements of Reusable Object Oriented Software</i>, Gamma et al., Addison-Wesley, 1996.</p>
<p class="calibre1"><a id="p165"></a> <i class="calibre4">This page intentionally left blank </i></p>
<p class="calibre1"><a id="p166"></a><img src="index-166_1.png" alt="Image 37" class="calibre2"/></p>
<p class="calibre1"><a href="index_split_000.html#p12"><b class="calibre3">10</b></a></p>
<p class="calibre1"><a href="index_split_000.html#p12"><b class="calibre3">Classes</b></a></p>
<p class="calibre1">with Jeff Langr</p>
<p class="calibre1">So far in this book we have focused on how to write lines and blocks of code well. We have delved into proper composition of functions and how they interrelate. But for all the attention to the expressiveness of code statements and the functions they comprise, we still don’t have clean code until we’ve paid attention to higher levels of code organization. Let’s talk about clean classes.</p>
<p class="calibre1">135</p>
<p class="calibre1"><a id="p167"></a>136</p>
<div class="calibre6" id="calibre_pb_129"></div>
</body>
</html>
